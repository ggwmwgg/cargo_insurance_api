<table align="right">
 <tr><td><a href="README_en.md"><img src="https://github.com/ggwmwgg/ggwmwgg/blob/main/images/us.png" height="13" alt=""> English</a></td></tr>
 <tr><td><b><img src="https://github.com/ggwmwgg/ggwmwgg/blob/main/images/ru_s.png" height="13" alt=""> Русский</b></td></tr>
</table>

## Сервис расчета стоимости страхования (REST API)

### Описание
Микросервис расчета стоимости страхования в зависимости от типа груза и объявленной стоимости (ОС):
- Тариф должен загружаться из файла или принимать подобную JSON структуру:
```
{
    "2020-06-01": [
        {
            "cargo_type": "Glass",
            "rate": "0.04"
        },
        {
            "cargo_type": "Other",
            "rate": "0.01"
        },
    ],
    "2020-07-01": [
        {
            "cargo_type": "Glass",
            "rate": "0.035"
        },
        {
            "cargo_type": "Other",
            "rate": "0.015"
        },
    ]
}
```
- Сервис должен посчитать стоимость страхования для запроса используя активный тариф.
- Сервис возвращает (ОС * rate) в зависимости от указанного в запросе типа груза и даты.
- Сервис разворачивается внутри Docker.
- README.md содержит инструкцию по запуску сервиса.
- Данные сервиса хранятся в PostgreSQL.

#### Используемые технологии:
- *Python*
- *FastApi*
- *Tortoise ORM*
- *PostgreSQL*
- *Docker*
- *Docker-compose*

#### Конфигурация:
- Установите ```requirements.txt```.
- Установите свои данные для подключения к PostgreSQL в ```db.env```.
- Установите свои данные для healthcheck-a в ```docker-compose.yml``` на строчке 23.
- Соберите контейнеры с помощью ```docker-compose build```.
- Запустите контейнеры с помощью ```docker-compose up```, вы можете добавить флаг ```-d``` для запуска в фоновом режиме.
- Visit ```http://127.0.0.1:8000/```.
- Для остановки контейнеров используйте ```docker-compose down```.

#### Использование:
- Для загрузки данных из файла используйте ```get``` запрос на ```/load_data```.
- Для загрузки данных путем отправки json-объекта используйте ```post``` запрос на ```/load_data```.
- Для расчета стоимости страхования используйте ```post``` запрос на ```/calculate_insurance```, передав параметрами ```date```, ```cargo_type``` и ```declared_value```.

#### Возможные улучшения:
Запросы на изменение приветствуются. Для внесения значительных изменений, пожалуйста, сначала создайте проблему, чтобы обсудить, что вы хотите изменить.
